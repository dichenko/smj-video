# Настройка Telegram бота

Для использования Telegram бота необходимо создать его через BotFather и получить токен API. Выполните следующие шаги:

## 1. Создание бота через BotFather

1. Откройте Telegram и найдите [@BotFather](https://t.me/BotFather)
2. Отправьте команду `/newbot`
3. Введите имя для вашего бота (например, "SMJ Video Report Bot")
4. Введите уникальное имя пользователя для бота, которое должно заканчиваться на "bot" (например, "smj_video_report_bot")
5. После успешного создания бота, BotFather предоставит вам **токен API** - длинную строку символов

## 2. Настройка команд бота (опционально)

Для удобства пользователей вы можете добавить список команд:

1. Отправьте команду `/mybots` BotFather
2. Выберите вашего бота из списка
3. Нажмите "Edit Bot" и выберите "Edit Commands"
4. Отправьте список команд в формате `command - description`:
```
start - Запустить бота и показать главное меню
help - Получить справку по использованию бота
```

## 3. Настройка сообщения о приветствии (опционально)

1. Отправьте команду `/mybots` BotFather
2. Выберите вашего бота из списка
3. Нажмите "Edit Bot" и выберите "Edit Description"
4. Введите описание бота:
```
Бот для отправки отчетов по видеозаписям занятий. Используйте этого бота, чтобы отправлять информацию о проведенных занятиях в методический отдел.
```

## 4. Добавление токена в переменные окружения

После получения токена, добавьте его в файл `.env.local`:

```
TELEGRAM_BOT_TOKEN=your_telegram_token_here
```

## 5. Получение ID администратора

Чтобы получить свой ID в Telegram для настройки администратора:

1. Напишите боту [@userinfobot](https://t.me/userinfobot)
2. Бот автоматически пришлет вам информацию о вашем аккаунте, включая ID
3. Добавьте ID в файл `.env.local`:
```
ADMIN_TELEGRAM_ID=your_telegram_id
```

## 6. Настройка webhook для продакшн версии

После деплоя на Vercel, настройте webhook для вашего бота:

1. Посетите URL: `https://your-project-url.vercel.app/api/setupWebhook?secret=your_webhook_setup_secret`
2. Убедитесь, что в ответе есть подтверждение установки webhook

## 7. Проверка работоспособности

1. Откройте бота в Telegram
2. Отправьте команду `/start`
3. Бот должен ответить приветственным сообщением и показать кнопки для сдачи видео и получения справки

## Возможные проблемы и их решения

- **Бот не отвечает на сообщения**:
  - Проверьте, что переменная `TELEGRAM_BOT_TOKEN` установлена корректно
  - Убедитесь, что webhook настроен правильно (для продакшн версии)
  - Проверьте логи приложения на наличие ошибок

- **Администратор не получает уведомления**:
  - Проверьте, что переменная `ADMIN_TELEGRAM_ID` установлена корректно
  - Убедитесь, что администратор начал диалог с ботом (отправил хотя бы одно сообщение)

- **Проблемы с webhook**:
  - Убедитесь, что URL проекта доступен
  - Проверьте, что в переменных окружения установлен правильный `VERCEL_URL` 